(function(){window.CPA=function(){function a(){}return a.api_url="https://app-sp.webkul.com/shopify-zipcode-validator/",a.appendDiv=function(){return a.$.ajax({url:""+a.api_url+"index.php?p=find_zipcode_availability",type:"GET",async:!0,cache:!1,jsonpCallback:"createZipcodeForm",contentType:"application/json",dataType:"jsonp",data:{shop:a.shop_name},success:function(o){if(console.log(o),o.container_details!=!1){var t=a.getCookie("zipcode");console.log(t);var e="<style>#wk_find_zipcode{font-family:"+o.container_details.font_family+";}</style>";return e+="<div class='wk_zipfinder_form' ",t!=""&&(e+="style='display:none'"),e+=">",e+="<div class='wk_zipfinder_heading'><img src='"+a.api_url+"img/icon-navigator.png'> "+o.container_details.heading_label+":</div>",e+="<div class='wk_zipfinder_input'>",e+="<input type='text' name='wk_zipcode' value='"+t+"' id='wk_zipcode' placeholder='"+o.container_details.placeholder+"'>",e+='<input type="hidden" value="'+o.container_details.inavailability_msg+'" id="wk_inavail_msg">',e+='<input type="hidden" value="'+o.container_details.inavailability_msg_cart+'" id="wk_inavail_msg_cart">',e+="<input type='hidden' value='"+o.container_details.alert_msg+"' id='wk_alert_msg'>",e+="<input type='hidden' value='"+o.container_details.change_key+"' id='wk_change_key'>",e+="<input type='hidden' value='"+o.container_details.disable_add_to_cart+"' id='disable_add_to_cart'>",e+="<input type='hidden' value='"+o.container_details.error_bgcolor+"' id='error_bgcolor'>",e+="<input type='hidden' id='wk_zip_avail' value=''>",e+="</div>",e+="<div class='wk_zipfinder_btn'>",e+="<input type='button' value='"+o.container_details.btn_label+"' class='btn'>",e+="</div>",e+="</div>",e+="<div class='wk_availability_msg' style='display:none'",t!=""?e+="style='display:block'":e+="style='display:none'",e+="></div>",o.container_details.disable_add_to_cart==1&&(e+="<div class='wk_check_availability_msg' ",t!=""&&(e+="style='display:none'"),e+=">"+o.container_details.sub_heading_label+"</div>"),a.insertHtml(e)}},error:function(o,t,e){console.log(o.status)}})},a.insertHtml=function(o){var t=$("#wk_find_zipcode");t.html(o)},a.submitZipcode=function(o){$("#wk_zip_err").hide();var t=$("#wk_find_zipcode").attr("product-handle");if(!t||typeof t==null||t=="undefined"||t==null)var t=a.product_handle;else console.log("handle from theme");if(console.log(t),t=="cart")$.ajax({url:"/cart.js",type:"GET",contentType:"application/json",dataType:"json",success:function(e){var d=e.items.length;console.log(e);var n=[];for(i=0;i<d;i++)n.push(e.items[i].product_id);return console.log(n),console.log("cart validate"),a.$.ajax({url:""+a.api_url+"index.php?p=find_zipcode_availability",type:"GET",async:!0,cache:!1,jsonpCallback:"submitZipcodeFormCart",contentType:"application/json",dataType:"jsonp",data:{shop:a.shop_name,product_handle:t,zipcode:o,result:n},success:function(l){if(console.log("cart successs"),console.log(l),l.zipcode_details!=!1&&l.unavailable_products==null){if(l.zipcode_details!="not found"){console.log(c),document.cookie="zipcode="+o+";path=/";var p=l.zipcode_details.city_name,s=l.zipcode_details.availability_msg;console.log(s);var _=l.zipcode_details.change_key;s!=""&&(s=s.replace("{zipcode}","<b>"+o+"</b>"),s=s.replace("{cityname}","<b>"+p+"</b>")),s+=" <span id='wk_change_zipcode'>"+_+"</span>",$(".wk_zipfinder_form").css("display","none"),$(".wk_availability_msg").css("display","block"),$(".wk_availability_msg").css("background-color",l.zipcode_details.success_bgcolor),$(".wk_availability_msg").css("border-color","#c9ebd1"),$(".wk_availability_msg").css("width","auto"),$(".wk_availability_msg").css("float","right"),$(".wk_availability_msg").html(s),console.log("add name length=="+$("[name='checkout']").length),$("[name='checkout']").length!=0?$("[name='checkout']").removeAttr("disabled"):$("[action*='/cart/add']").find("[type='submit']").removeAttr("disabled"),$(".wk_check_availability_msg").css("display","none"),$("#wk_zip_avail").attr("value","1")}}else if(l.unavailable_products!=!1||l.zipcode_details==!1){var c="";for(var u in l){c+=l.unavailable_products+", ";var c=c.substring(0,c.length-2);console.log(c)}document.cookie="zipcode="+o+";path=/";var r=$("#wk_inavail_msg_cart").val(),g=$("#error_bgcolor").val(),v=$("#disable_add_to_cart").val(),_=$("#wk_change_key").val();if(r!=""&&r!="undefined"){console.log(r);var f=r.replace("{zipcode}","<b>"+o+"</b>"),f=f.replace("{product}","<b>"+c+"</b>");f+=" <span id='wk_change_zipcode'>"+_+"</span>",console.log(f)}$(".wk_zipfinder_form").css("display","none"),$(".wk_availability_msg").css("display","block"),$(".wk_availability_msg").css("background-color",g),$(".wk_availability_msg").css("border-color","#ff9f97"),$(".wk_availability_msg").css("width","auto"),$(".wk_availability_msg").css("float","right"),$(".wk_availability_msg").html(f),v==1&&(console.log("add name length=="+$("[name='add']").length),console.log("action length=="+$("[action*='/cart/add']").length),$("[name='checkout']").length!=0?$("[name='checkout']").attr("disabled",!0):$("[action*='/cart/add']").find("[type='submit']").attr("disabled",!0)),$(".wk_check_availability_msg").css("display","none"),$("#wk_zip_avail").attr("value","0")}},error:function(l,p,s,_){console.log(_),console.log("error cart"),console.log(l),document.cookie="zipcode="+o+";path=/";var c=$("#wk_inavail_msg").val(),u=$("#error_bgcolor").val(),r=$("#disable_add_to_cart").val(),g=$("#wk_change_key").val();if(c!=""&&c!="undefined"){console.log(c);var v=c.replace("{zipcode}","<b>"+o+"</b>");v+=" <span id='wk_change_zipcode'>"+g+"</span>"}$(".wk_zipfinder_form").css("display","none"),$(".wk_availability_msg").css("display","block"),$(".wk_availability_msg").css("background-color",u),$(".wk_availability_msg").css("border-color","#ff9f97"),$(".wk_availability_msg").css("width","auto"),$(".wk_availability_msg").css("float","right"),$(".wk_availability_msg").html(v),r==1&&(console.log("add name length=="+$("[name='add']").length),console.log("action length=="+$("[action*='/cart/add']").length),$("[name='checkout']").length!=0?$("[name='checkout']").attr("disabled",!0):$("[action*='/cart/add']").find("[type='submit']").attr("disabled",!0)),$(".wk_check_availability_msg").css("display","none"),$("#wk_zip_avail").attr("value","0")}})},error:function(e,d,n){console.log("eror"),console.log(e.status),console.log(n)}});else return a.$.ajax({url:""+a.api_url+"index.php?p=find_zipcode_availability",type:"GET",async:!0,cache:!1,jsonpCallback:"submitZipcodeForm",contentType:"application/json",dataType:"jsonp",data:{shop:a.shop_name,product_handle:t,zipcode:o},success:function(e){if(console.log("success product"),console.log(e),e.zipcode_details!=!1&&e.zipcode_details!="not found"){document.cookie="zipcode="+o+";path=/";var d=e.zipcode_details.city_name,n=e.zipcode_details.availability_msg,l=e.zipcode_details.change_key;n!=""&&n!=null&&(n=n.replace("{zipcode}","<b>"+o+"</b>"),n=n.replace("{cityname}","<b>"+d+"</b>")),n+=" <span id='wk_change_zipcode'>"+l+"</span>",$(".wk_zipfinder_form").css("display","none"),$(".wk_availability_msg").css("display","block"),$(".wk_availability_msg").css("background-color",e.zipcode_details.success_bgcolor),$(".wk_availability_msg").css("border-color","#c9ebd1"),$(".wk_availability_msg").html(n),console.log("add name length=="+$("[name='add']").length),console.log("action length=="+$("[action*='/cart/add']").length),$("[name='add']").length!=0?$("[name='add']").removeAttr("disabled"):$("[action*='/cart/add']").find("[type='submit']").removeAttr("disabled"),$(".shopify-payment-button__button").length!=0&&$(".shopify-payment-button__button").removeAttr("disabled"),$(".wk_check_availability_msg").css("display","none"),$("#wk_zip_avail").attr("value","1")}if(typeof RP!="undefined"&&a.$.isFunction(RP)&&$("#wk_zip_related_products").length!=0){var p=$("#wk_zip_related_products").data("handle"),s=$("#wk_zip_related_products").data("prohandle");RP.getRelatedProducts(o,p,s)}},error:function(e,d,n,l){console.log("error product"),console.log(e.status),document.cookie="zipcode="+o+";path=/";var p=$("#wk_inavail_msg").val(),s=$("#error_bgcolor").val(),_=$("#disable_add_to_cart").val(),c=$("#wk_change_key").val();if(p!=""&&p!="undefined"){console.log(p);var u=p.replace("{zipcode}","<b>"+o+"</b>");u+=" <span id='wk_change_zipcode'>"+c+"</span>"}if($(".wk_zipfinder_form").css("display","none"),$(".wk_availability_msg").css("display","block"),$(".wk_availability_msg").css("background-color",s),$(".wk_availability_msg").css("border-color","#ff9f97"),$(".wk_availability_msg").html(u),_==1&&(console.log("add name length=="+$("[name='add']").length),console.log("action length=="+$("[action*='/cart/add']").length),$("[name='add']").length!=0?$("[name='add']").attr("disabled",!0):$("[action*='/cart/add']").find("[type='submit']").attr("disabled",!0),$(".shopify-payment-button__button").length!=0&&$(".shopify-payment-button__button").attr("disabled",!0)),$(".wk_check_availability_msg").css("display","none"),$("#wk_zip_avail").attr("value","0"),typeof RP!="undefined"&&a.$.isFunction(RP)&&$("#wk_zip_related_products").length!=0){var r=$("#wk_zip_related_products").data("handle"),g=$("#wk_zip_related_products").data("prohandle");RP.getRelatedProducts(o,r,g)}}})},a.getCookie=function(o){for(var t=o+"=",e=document.cookie.split(";"),d=0;d<e.length;d++){for(var n=e[d];n.charAt(0)==" ";)n=n.substring(1);if(n.indexOf(t)==0)return n.substring(t.length,n.length)}return""},a.labelLoadjQuery=function(o){return a.$=jQuery.noConflict(!0),o()},a.labelLoadScript=function(o,t){var e;e=document.createElement("script"),e.type="text/javascript";var d;return d=document.createElement("link"),d.type="text/css",d.rel="stylesheet",e.readyState?e.onreadystatechange=function(){if(e.readyState==="loaded"||e.readyState==="complete")return e.onreadystatechange=null,t()}:e.onload=function(){return t()},e.src=o,d.href=a.api_url+"css/find_zipcode_availability.css",document.getElementsByTagName("head")[0].appendChild(e),document.getElementsByTagName("head")[0].appendChild(d),!0},a}(),CPA.path=window.location.pathname.split("/"),CPA.shop_name=Shopify.shop,CPA.product_handle=CPA.path.pop(-1),CPA.page=CPA.path.pop(-2),console.log("server 1"),CPA.labelLoadjQuery(function(){if(console.log("zipcode block"),$("#wk_find_zipcode").length!=0){CPA.appendDiv();var a=CPA.getCookie("zipcode"),o=$("#disable_add_to_cart").val();console.log(document.cookie),a!=""?(console.log("cookie not empty"),console.log(a),CPA.submitZipcode(a)):(console.log("cookie empty"),console.log("disable add to cart=="+o),setTimeout(function(){var t=$("#disable_add_to_cart").val();t==1&&(console.log("disable add to cart"),console.log("add name length=="+$("[name='add']").length),console.log("action length=="+$("[action*='/cart/add']").length),$("[name='add']").length!=0||$("[name='checkout']").length!=0?($("[name='add']").attr("disabled",!0),$("[name='checkout']").attr("disabled",!0)):$("[action*='/cart/add']").find("[type='submit']").attr("disabled",!0),$(".shopify-payment-button__button").length!=0&&$(".shopify-payment-button__button").attr("disabled",!0))},1e3))}}),$("body").on("click",".wk_zipfinder_btn",function(){var a=$.trim($("#wk_zipcode").val());a!=""&&CPA.submitZipcode(a)}),$("body").on("click","#wk_change_zipcode",function(){var a=CPA.getCookie("zipcode");$(".wk_zipfinder_form").css("display","block"),$("#wk_zipcode").attr("value",a),$(".wk_availability_msg").html(""),$(".wk_availability_msg").css("display","none")});var b=CPA.getCookie("zipcode");if(b==""?$("#wk_zipcode_popup").length>0&&$.ajax({url:CPA.api_url+"index.php?p=zipcode_popup",type:"POST",data:{shop:CPA.shop_name},success:function(a){$("#wk_zipcode_popup").html(a),console.log(a)},error:function(a){console.log("something went wrong")}}):$("#wk_zipcode_popup").hide(),$("#wk_zipcode_popup").on("click",".cross_btn",function(){b==""&&(document.cookie='zipcode=""'),$("#wk_zipcode_popup").hide()}),$("#wk_zipcode_popup").on("click",".global_btn",function(){var a=$(this).siblings(".input_field_div").children(".global_zipcode_input").val();if($("#wk_zipcode_input").length>0){var o='<div class="zipcode_div"><span class="title">Zipcode </span><input type="text" class="input_field_zipcode" value='+a+"></div>";$("#wk_zipcode_input").find(".zipcode_div").length>0?$("#wk_zipcode_input").html(o):$("#wk_zipcode_input").append(o)}a.length<1?$(".wk_zip_error").show():($(".wk_zip_error").hide(),document.cookie="zipcode="+a,$("#wk_zipcode_popup").hide(),window.location.reload())}),b!=""){if($("#wk_zipcode_input").length>0){var h='<div class="zipcode_div"><span class="title">Zipcode </span><input type="text" class="input_field_zipcode" value='+b+"></div>";$("#wk_zipcode_input").find(".zipcode_div").length>0?$("#wk_zipcode_input").html(h):$("#wk_zipcode_input").append(h)}}$("#wk_find_zipcode").length!=0&&$("select").on("change",function(){var a=$("#wk_zip_avail").val();console.log("zip_avail=="+a),a!=1?(console.log("hide add to cart"),$("[name='add']").length!=0?$("[name='add']").attr("disabled",!0):$("[action*='/cart/add']").find("[type='submit']").attr("disabled",!0),$(".shopify-payment-button__button").length!=0&&$(".shopify-payment-button__button").attr("disabled",!0)):(console.log("show add to cart"),$("[name='add']").length!=0?$("[name='add']").attr("disabled",!1):$("[action*='/cart/add']").find("[type='submit']").attr("disabled",!1),$(".shopify-payment-button__button").length!=0&&$(".shopify-payment-button__button").attr("disabled",!1))}),$("body").find(".zipcode_div > .input_field_zipcode").keyup(function(){$("#wk_zipcode_popup").length>0&&$.ajax({url:CPA.api_url+"index.php?p=zipcode_popup",type:"POST",data:{shop:CPA.shop_name},success:function(a){$("#wk_zipcode_popup").html(a).show(),console.log(a)},error:function(a){console.log("something went wrong")}})})}).call(this);
//# sourceMappingURL=/s/files/1/0722/2059/t/88/assets/wk_zipcode_validator.js.map?v=4472857908250747814
